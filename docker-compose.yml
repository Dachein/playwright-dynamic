version: '3.8'

services:
  playwright:
    build: .
    container_name: playwright-dynamic
    ports:
      - "3000:3000"
    environment:
      # ğŸ” å»ºè®®åœ¨æœåŠ¡å™¨ä¸Šé€šè¿‡ .env æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡è¦†ç›–æ­¤å€¼
      - API_TOKEN=${API_TOKEN:-mindtalk-secret-2026}
    restart: always
    # ç»™å®¹å™¨è¶³å¤Ÿçš„å†…å­˜ï¼Œæ¯•ç«Ÿæµè§ˆå™¨æ˜¯ä¸ªâ€œè´ªåƒâ€çš„å°å®¶ä¼™
    shm_size: '2gb'
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3000/health"]
      interval: 30s
      timeout: 10s
      retries: 3
